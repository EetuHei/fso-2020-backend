(this.webpackJsonppart2=this.webpackJsonppart2||[]).push([[0],{20:function(e,n,t){e.exports=t(44)},25:function(e,n,t){},44:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(19),c=t.n(u),o=(t(25),t(2)),l=t.n(o),i=t(5),s=t(9),m=t(3),f=function(e){var n=e.filter,t=e.handleChange;return r.a.createElement(r.a.Fragment,null,"filter show with",r.a.createElement("input",{value:n,onChange:function(e){t(e)}}))},d=function(e){var n=e.newName,t=e.number,a=e.handleNameChange,u=e.handleNumberChange,c=e.handleSubmit;return r.a.createElement("form",{onSubmit:function(e){c(e)}},r.a.createElement("div",null,"name:"," ",r.a.createElement("input",{value:n,onChange:function(e){a(e)}}),r.a.createElement("div",null,"number:"," ",r.a.createElement("input",{value:t,onChange:function(e){u(e)}}))),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},p=function(e){var n=e.persons,t=e.handleDelete;return r.a.createElement(r.a.Fragment,null,n.map((function(e){return r.a.createElement("p",{key:e.name},e.name," ",e.number," ",r.a.createElement("button",{onClick:function(){return t(e)}},"Delete"))})))},h=t(4),b=t.n(h),v="/api/v1/persons",w={GetAll:function(){var e=Object(i.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get(v);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Create:function(){var e=Object(i.a)(l.a.mark((function e(n){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("".concat(v,"/add"),n);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Update:function(){var e=Object(i.a)(l.a.mark((function e(n,t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.put("".concat(v,"/").concat(n),t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),Delete:function(){var e=Object(i.a)(l.a.mark((function e(n){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.delete("".concat(v,"/delete/").concat(n));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},E=t(8),g=t.n(E),j=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:g.a.error},n)},O=function(){var e=Object(a.useState)(""),n=Object(m.a)(e,2),t=n[0],u=n[1],c=Object(a.useState)(""),o=Object(m.a)(c,2),h=o[0],b=o[1],v=Object(a.useState)(),E=Object(m.a)(v,2),O=E[0],C=E[1],k=Object(a.useState)(""),x=Object(m.a)(k,2),y=x[0],D=x[1],N=Object(a.useState)(null),S=Object(m.a)(N,2),F=S[0],_=S[1];Object(a.useEffect)((function(){w.GetAll().then((function(e){return u(e)}))}),[]),console.log("render",t.length,"notes");var A=Object(s.a)(t);y&&(A=A.filter((function(e){return e.name.toLowerCase().includes(y.toLowerCase())})));var G=function(){var e=Object(i.a)(l.a.mark((function e(n){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),a={name:h,number:O,id:t.length+1},w.Create(a).then((function(e){u(e),b("")})),t.map((function(e){return e.name})).includes(h)?window.confirm("".concat(h," is already added to phonebook, replace the old number with a new one ?"))&&(r=t.find((function(e){return e.name===h})),w.Update(r.id,{name:h,number:O}).then((function(e){return u(e)})),b(""),C("")):w.Create(a).then((function(e){u(e),b(""),C("")}));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(j,{message:F,style:g.a}),r.a.createElement(f,{filter:y,handleChange:function(e){return D(e.target.value)}}),r.a.createElement("h3",null,"add a new"),r.a.createElement(d,{newName:h,number:O,handleNameChange:function(e){return b(e.target.value)},handleNumberChange:function(e){return C(e.target.value)},handleSubmit:G}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(p,{persons:A,handleDelete:function(e){if(window.confirm("Delete ".concat(e.name," ?"))){w.Delete(e.id).then((function(e){return console.log("Deleted",e)})).catch((function(n){if(n)throw _("".concat(e.name," data has already been deleted from the server ")),setTimeout((function(){_(null)}),5e3),n}));var n=t.filter((function(n){return n.id!==e.id}));u(n)}else _("".concat(e.name," was not deleted from phonebook")),setTimeout((function(){_(null)}),5e3)}}))},C=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(O,null))};c.a.render(r.a.createElement(C,null),document.getElementById("root"))},8:function(e,n,t){e.exports={error:"phonebook_error__362Vi"}}},[[20,1,2]]]);
//# sourceMappingURL=main.3f008fc8.chunk.js.map